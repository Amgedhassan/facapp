<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facilities Management Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Red, Black, and White -->
    <!-- Application Structure Plan: The application is designed as a central dashboard with large, clickable cards representing key service categories (e.g., Room Reservations, Service Requests). Clicking a card opens a dedicated modal window that contains a multi-step workflow for that specific task. This task-oriented, modal-based approach was chosen to keep the main interface uncluttered and to guide the user through one process at a time, preventing confusion and simplifying complex requests into manageable steps. This structure is highly intuitive for an internal tool where users have clear, specific goals. -->
    <!-- Visualization & Content Choices: The source report is process-driven, focusing on user requests rather than data analysis. Therefore, the primary presentation method is interactive, multi-step forms within modals, built with HTML, CSS, and JavaScript. Charts are not necessary. Key flows include: 1) Room Reservation: A multi-step process (select room, location, date/time) to simplify booking. 2) Service Requests: Individual forms for stationery and mailroom requests to capture necessary details efficiently. 3) Ticketing System: A streamlined form for reporting issues quickly. This form-based approach directly maps to the user tasks outlined in the report, providing the most direct and effective way for employees to interact with facilities services. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        .screen { display: none; }
        .screen.active { display: flex; flex-direction: column; height: 100%; }
        
        .screen-header {
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .screen-title { font-size: 1.125rem; font-weight: 600; color: #111827; }
        .screen-body { flex-grow: 1; overflow-y: auto; padding: 1.5rem; }

        .step-content { display: none; }
        .step-content.active { display: block; }
        
        .form-title { font-size: 1.75rem; font-weight: 700; color: #111827; text-align: center; }
        .form-subtitle { font-size: 1rem; color: #6b7280; text-align: center; margin-top: 0.5rem; }
        .option-button { width: 100%; text-align: left; padding: 1rem; border: 1px solid #e5e7eb; border-radius: 8px; font-weight: 500; transition: all 0.2s; background-color: #fff; }
        .option-button:hover { border-color: #DC2626; background-color: #fef2f2; }
        .primary-button { background-color: #DC2626; color: white; padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 600; width: 100%; transition: background-color 0.2s; }
        .primary-button:hover { background-color: #B91C1C; }
        .form-input { width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.5rem; }
        .calendar-day { text-align: center; padding: 0.5rem; border-radius: 50%; cursor: pointer; }
        .calendar-day.header { font-weight: 600; color: #6b7280; }
        .calendar-day.empty { cursor: default; }
        .calendar-day:not(.empty):not(.header):hover { background-color: #fee2e2; }
        .calendar-day.selected { background-color: #DC2626; color: white; }
        .time-slot { padding: 0.5rem 1rem; border: 1px solid #d1d5db; border-radius: 8px; cursor: pointer; text-align: center; }
        .time-slot:hover { border-color: #DC2626; background-color: #fef2f2; }
        .time-slot.selected { background-color: #DC2626; color: white; border-color: #DC2626; }
    </style>
</head>
<body class="bg-gray-200">

    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="w-full max-w-sm h-[90vh] max-h-[850px] bg-gray-50 rounded-2xl shadow-2xl overflow-hidden flex flex-col relative">

            <!-- Screen: Main Dashboard -->
            <div id="screen-main" class="screen active">
                <div class="screen-body">
                    <header class="text-center mb-8">
                        <h1 class="text-2xl font-bold text-gray-800">Facilities Mgmt Hub</h1>
                        <p class="text-md text-gray-600 mt-1">Select a service to begin.</p>
                    </header>
                    <main class="space-y-4">
                        <div data-target-screen="screen-rooms" class="bg-white p-4 rounded-xl shadow-sm hover:shadow-lg transition-shadow cursor-pointer flex items-center space-x-4">
                            <div class="text-3xl">üè†</div>
                            <div>
                                <h2 class="text-lg font-bold text-gray-900">Room Reservations</h2>
                                <p class="text-sm text-gray-600">Book fun, meditation, or lactation rooms.</p>
                            </div>
                        </div>
                        <div data-target-screen="screen-wellness" class="bg-white p-4 rounded-xl shadow-sm hover:shadow-lg transition-shadow cursor-pointer flex items-center space-x-4">
                            <div class="text-3xl">‚ù§Ô∏è</div>
                            <div>
                                <h2 class="text-lg font-bold text-gray-900">Health & Wellness</h2>
                                <p class="text-sm text-gray-600">Manage gym subscriptions and more.</p>
                            </div>
                        </div>
                        <div data-target-screen="screen-requests" class="bg-white p-4 rounded-xl shadow-sm hover:shadow-lg transition-shadow cursor-pointer flex items-center space-x-4">
                            <div class="text-3xl">üìã</div>
                            <div>
                                <h2 class="text-lg font-bold text-gray-900">Service Requests</h2>
                                <p class="text-sm text-gray-600">Request stationery or mailroom services.</p>
                            </div>
                        </div>
                        <div data-target-screen="screen-transport" class="bg-white p-4 rounded-xl shadow-sm hover:shadow-lg transition-shadow cursor-pointer flex items-center space-x-4">
                            <div class="text-3xl">üöå</div>
                            <div>
                                <h2 class="text-lg font-bold text-gray-900">Food & Transport</h2>
                                <p class="text-sm text-gray-600">Food allowance and VodaBus trips.</p>
                            </div>
                        </div>
                        <div data-target-screen="screen-ticketing" class="bg-white p-4 rounded-xl shadow-sm hover:shadow-lg transition-shadow cursor-pointer flex items-center space-x-4">
                            <div class="text-3xl">üéüÔ∏è</div>
                            <div>
                                <h2 class="text-lg font-bold text-gray-900">Submit a Trouble Ticket</h2>
                                <p class="text-sm text-gray-600">Report any facility issues.</p>
                            </div>
                        </div>
                    </main>
                </div>
            </div>

            <!-- Screen: Room Reservations Flow -->
            <div id="screen-rooms" class="screen">
                 <div class="screen-header">
                    <button class="navigate-back text-xl font-bold">‚Üê</button>
                    <h2 class="screen-title">Room Reservations</h2>
                    <div class="w-6"></div>
                </div>
                <div class="screen-body">
                    <div id="roomsStep1" class="step-content active">
                        <h2 class="form-title">Room Type</h2>
                        <p class="form-subtitle">What kind of room would you like to book?</p>
                        <div class="space-y-4 mt-6">
                            <button class="option-button" data-room-type="Fun Room">üéÆ Fun Room</button>
                            <button class="option-button" data-room-type="Meditation Room">üßò Meditation Room</button>
                            <button class="option-button" data-room-type="Lactation Room">üçº Lactation Room</button>
                        </div>
                    </div>
                    <div id="roomsStep2" class="step-content">
                        <h2 class="form-title">Meditation Room Rules</h2>
                        <p class="form-subtitle">Please acknowledge the guidelines.</p>
                        <div class="mt-6 text-left bg-gray-100 p-4 rounded-lg space-y-3 text-sm text-gray-700">
                            <p>‚úì Sessions are limited to 30 minutes.</p>
                            <p>‚úì Please maintain silence inside the room.</p>
                            <p>‚úì No food or drinks are permitted.</p>
                            <p>‚úì Leave the space clean for the next person.</p>
                        </div>
                        <button id="acknowledgeRulesBtn" class="primary-button w-full mt-6">Acknowledge & Continue</button>
                    </div>
                    <div id="roomsStep3" class="step-content">
                        <h2 class="form-title">Select Location</h2>
                        <p class="form-subtitle">Book a <span id="roomTypeDisplay" class="font-semibold"></span> at:</p>
                        <div class="space-y-4 mt-6">
                            <button class="option-button" data-location="Dallah">üìç Dallah</button>
                            <button class="option-button" data-location="VHUB1">üìç VHUB1</button>
                            <button class="option-button" data-location="Zayyan">üìç Zayyan</button>
                        </div>
                    </div>
                    <div id="roomsStep4" class="step-content">
                        <h2 class="form-title">Select Date & Time</h2>
                        <p class="form-subtitle">Booking at <span id="locationDisplay" class="font-semibold"></span>.</p>
                        <div class="mt-4">
                            <div id="calendar" class="w-full"></div>
                            <div id="timeSlotsContainer" class="mt-4 hidden"><h3 class="font-semibold text-center mb-2">Available Slots</h3><div id="timeSlots" class="grid grid-cols-3 sm:grid-cols-4 gap-2"></div></div>
                        </div>
                    </div>
                    <div id="roomsStep5" class="step-content text-center">
                        <div class="w-16 h-16 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mx-auto text-4xl">‚úì</div>
                        <h2 class="form-title mt-4">Booking Confirmed!</h2>
                        <p class="mt-2 text-gray-600">A confirmation has been sent to your email.</p>
                        <div id="bookingSummary" class="mt-4 text-left bg-gray-100 p-4 rounded-lg text-sm"></div>
                        <button class="primary-button mt-6 w-full navigate-home">Done</button>
                    </div>
                </div>
            </div>

            <!-- Screen: Wellness Flow -->
            <div id="screen-wellness" class="screen">
                 <div class="screen-header">
                    <button class="navigate-back text-xl font-bold">‚Üê</button>
                    <h2 class="screen-title">Health & Wellness</h2>
                    <div class="w-6"></div>
                </div>
                <div class="screen-body">
                     <div id="wellnessStep1" class="step-content active">
                        <h2 class="form-title">Health & Wellness</h2>
                        <p class="form-subtitle">Select a service to proceed.</p>
                        <div class="space-y-4 mt-6">
                            <button class="option-button" data-wellness-type="gymSubscription">Request Gym Subscription</button>
                            <button class="option-button opacity-50 cursor-not-allowed" disabled>Cancel Gym Subscription <span class="text-xs font-normal">(Coming Soon)</span></button>
                        </div>
                    </div>
                    <div id="wellnessStep2" class="step-content">
                        <h2 class="form-title">Gym Subscription</h2>
                        <p class="form-subtitle">Complete the form to join.</p>
                        <form id="gymForm" class="space-y-4 mt-6 text-left text-sm">
                            <div>
                                <label for="gymEmployeeName" class="block font-medium text-gray-700">Employee Name</label>
                                <input type="text" id="gymEmployeeName" class="form-input mt-1" required placeholder="Your name or email">
                            </div>
                            <div>
                                <label for="gymStaffId" class="block font-medium text-gray-700">Staff ID No.</label>
                                <input type="text" id="gymStaffId" class="form-input mt-1" required>
                            </div>
                            <div>
                                <label class="block font-medium text-gray-700">Location</label>
                                <div class="mt-1 p-3 border border-gray-300 rounded-lg"><label class="flex items-center"><input type="radio" name="location" value="V-HUB" class="h-4 w-4 text-red-600" required><span class="ml-3">V-HUB</span></label></div>
                            </div>
                            <div class="space-y-2">
                                <label class="block font-medium text-gray-700">Disclaimers</label>
                                <div class="relative flex items-start p-3 border border-gray-300 rounded-lg"><div class="flex h-5 items-center"><input id="disclaimer1" type="checkbox" class="h-4 w-4 rounded text-red-600" required></div><div class="ml-3 text-sm"><label for="disclaimer1">Membership is activated next month.</label></div></div>
                                <div class="relative flex items-start p-3 border border-gray-300 rounded-lg"><div class="flex h-5 items-center"><input id="disclaimer2" type="checkbox" class="h-4 w-4 rounded text-red-600" required></div><div class="ml-3 text-sm"><label for="disclaimer2">Book visits via the gym's admin at VHUB2.</label></div></div>
                            </div>
                            <button type="submit" class="primary-button w-full !mt-6">Submit</button>
                        </form>
                    </div>
                    <div id="wellnessStep3" class="step-content text-center">
                        <div class="w-16 h-16 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mx-auto text-4xl">‚úì</div>
                        <h2 class="form-title mt-4">Request Received!</h2>
                        <p class="mt-2 text-gray-600">Your gym subscription request has been submitted.</p>
                        <button class="primary-button mt-6 w-full navigate-home">Done</button>
                    </div>
                </div>
            </div>

            <!-- Screen: Service Requests Flow -->
            <div id="screen-requests" class="screen">
                <div class="screen-header">
                    <button class="navigate-back text-xl font-bold">‚Üê</button>
                    <h2 class="screen-title">Service Requests</h2>
                    <div class="w-6"></div>
                </div>
                <div class="screen-body">
                    <div id="requestsStep1" class="step-content active">
                        <h2 class="form-title">Service Requests</h2>
                        <p class="form-subtitle">What would you like to request?</p>
                        <div class="space-y-4 mt-6">
                            <button class="option-button" data-request-type="stationery">Request Stationery</button>
                            <button class="option-button" data-request-type="mailroom">Mailroom Request</button>
                        </div>
                    </div>
                    <div id="requestsStep2" class="step-content">
                         <h2 class="form-title">Stationery Request</h2>
                         <form id="stationeryForm" class="space-y-3 mt-6 text-left text-sm">
                            <div><label for="stationeryEmail" class="block font-medium text-gray-700">Requester E-mail</label><input type="email" id="stationeryEmail" class="form-input mt-1" required></div>
                            <div><label for="stationeryLocation" class="block font-medium text-gray-700">Location</label><select id="stationeryLocation" class="form-input mt-1" required><option>VHUBs</option><option>Dallah</option><option>Zayyan</option></select></div>
                            <div class="grid grid-cols-3 gap-2">
                                <div class="col-span-2"><label for="stationeryItem1">Item 1</label><input type="text" id="stationeryItem1" class="form-input" required></div>
                                <div><label for="stationeryQty1">Qty</label><input type="number" id="stationeryQty1" class="form-input" required min="1"></div>
                            </div>
                            <div class="grid grid-cols-3 gap-2">
                                <div class="col-span-2"><label for="stationeryItem2">Item 2</label><input type="text" id="stationeryItem2" class="form-input"></div>
                                <div><label for="stationeryQty2">Qty</label><input type="number" id="stationeryQty2" class="form-input" min="1"></div>
                            </div>
                            <button type="submit" class="primary-button w-full !mt-6">Submit Request</button>
                        </form>
                    </div>
                    <div id="requestsStep3" class="step-content text-center">
                        <div class="w-16 h-16 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mx-auto text-4xl">‚úì</div>
                        <h2 class="form-title mt-4">Request Sent!</h2>
                        <p class="mt-2 text-gray-600">Your stationery request has been sent.</p>
                        <button class="primary-button mt-6 w-full navigate-home">Done</button>
                    </div>
                    <div id="requestsStep4" class="step-content">
                        <h2 class="form-title">Mailroom Request</h2>
                         <form id="mailroomForm" class="space-y-3 mt-6 text-left text-sm">
                            <div class="grid grid-cols-2 gap-2">
                                <div><label for="mailroomEmployeeName">Employee Name</label><input type="text" id="mailroomEmployeeName" class="form-input" required></div>
                                <div><label for="mailroomStaffId">Staff ID No.</label><input type="text" id="mailroomStaffId" class="form-input" required></div>
                            </div>
                            <div><label for="mailroomMobile">Mobile Number</label><input type="tel" id="mailroomMobile" class="form-input" required></div>
                            <div><label for="mailroomFrom">From (Location)</label><select id="mailroomFrom" class="form-input" required><option>VHUBs</option><option>Dallah</option><option>Zayyan</option></select></div>
                            <div><label for="mailroomTo">To (Location)</label><select id="mailroomTo" class="form-input" required><option>VHUBs</option><option>Dallah</option><option>Zayyan</option><option>Other</option></select></div>
                             <div><label for="mailroomDescription">Description</label><textarea id="mailroomDescription" rows="2" class="form-input" placeholder="e.g., Internal documents..." required></textarea></div>
                            <button type="submit" class="primary-button w-full !mt-6">Submit Request</button>
                        </form>
                    </div>
                    <div id="requestsStep5" class="step-content text-center">
                         <div class="w-16 h-16 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mx-auto text-4xl">‚úì</div>
                        <h2 class="form-title mt-4">Request Submitted!</h2>
                        <p class="mt-2 text-gray-600">Your mail request has been sent.</p>
                        <button class="primary-button mt-6 w-full navigate-home">Done</button>
                    </div>
                </div>
            </div>
            
            <!-- Screen: Transport Flow (Coming Soon) -->
             <div id="screen-transport" class="screen">
                <div class="screen-header">
                    <button class="navigate-back text-xl font-bold">‚Üê</button>
                    <h2 class="screen-title">Food & Transport</h2>
                    <div class="w-6"></div>
                </div>
                <div class="screen-body flex flex-col items-center justify-center text-center">
                    <h2 class="form-title">Coming Soon</h2>
                    <p class="form-subtitle">This feature is currently under development.</p>
                </div>
            </div>

            <!-- Screen: Ticketing Flow -->
            <div id="screen-ticketing" class="screen">
                <div class="screen-header">
                    <button class="navigate-back text-xl font-bold">‚Üê</button>
                    <h2 class="screen-title">Submit a Ticket</h2>
                    <div class="w-6"></div>
                </div>
                <div class="screen-body">
                    <div id="ticketingStep1" class="step-content active">
                        <h2 class="form-title">Trouble Ticket</h2>
                        <form id="ticketForm" class="space-y-3 mt-6 text-left text-sm">
                            <div class="grid grid-cols-2 gap-2">
                                 <div><label for="ticketCategory">Category</label><select id="ticketCategory" class="form-input" required><option>Facilities</option><option>Property (Civil)</option><option>Property (Electricity)</option><option>Property (Mechanical)</option><option>H&S</option></select></div>
                                 <div><label for="ticketSubCategory">Sub-Category</label><select id="ticketSubCategory" class="form-input" required></select></div>
                            </div>
                            <div><label for="ticketDescription">Description of Issue</label><textarea id="ticketDescription" rows="4" class="form-input" required placeholder="Please provide as much detail as possible..."></textarea></div>
                             <button type="submit" class="primary-button w-full !mt-6">Submit Ticket</button>
                        </form>
                    </div>
                     <div id="ticketingStep2" class="step-content text-center">
                        <div class="w-16 h-16 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mx-auto text-4xl">‚úì</div>
                        <h2 class="form-title mt-4">Ticket Submitted!</h2>
                        <p class="mt-2 text-gray-600">Our team will look into the issue shortly.</p>
                        <button class="primary-button mt-6 w-full navigate-home">Done</button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const appState = {
            booking: { room: null, location: null, date: null, time: null },
            history: ['screen-main'],
        };
        
        const mainScreen = document.getElementById('screen-main');

        function navigateTo(screenId) {
            document.querySelectorAll('.screen.active').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId)?.classList.add('active');
            appState.history.push(screenId);
        }

        function navigateBack() {
            const currentScreenId = appState.history.pop();
            const currentScreen = document.getElementById(currentScreenId);
            
            const prevScreenId = appState.history[appState.history.length - 1];
            if (!prevScreenId) {
                appState.history.push('screen-main');
                navigateTo('screen-main');
                return;
            }

            document.querySelectorAll('.screen.active').forEach(s => s.classList.remove('active'));
            document.getElementById(prevScreenId)?.classList.add('active');
            
            // Reset steps in the screen we are leaving
            const steps = currentScreen.querySelectorAll('.step-content');
            if (steps.length > 0) {
                 steps.forEach(s => s.classList.remove('active'));
                 steps[0].classList.add('active');
            }
        }
        
        function goToStep(screenElement, stepNumber) {
            const steps = screenElement.querySelectorAll('.step-content');
            steps.forEach(step => step.classList.remove('active'));
            const targetStep = screenElement.querySelector(`#${screenElement.id.replace('screen-','')}Step${stepNumber}`);
            if(targetStep) targetStep.classList.add('active');
        }

        // Main dashboard navigation
        document.querySelectorAll('[data-target-screen]').forEach(card => {
            card.addEventListener('click', () => navigateTo(card.dataset.targetScreen));
        });

        // Universal back and home buttons
        document.querySelectorAll('.navigate-back').forEach(btn => btn.addEventListener('click', navigateBack));
        document.querySelectorAll('.navigate-home').forEach(btn => {
            btn.addEventListener('click', () => {
                appState.history = ['screen-main'];
                navigateTo('screen-main');
                
                // Reset forms on the way out
                const screen = btn.closest('.screen');
                 const steps = screen.querySelectorAll('.step-content');
                if (steps.length > 0) {
                     steps.forEach(s => s.classList.remove('active'));
                     steps[0].classList.add('active');
                }
            });
        });


        // Flow Handlers
        function handleRoomBookingFlow() {
            const screen = document.getElementById('screen-rooms');
            if (!screen) return;

            screen.querySelectorAll('#roomsStep1 button[data-room-type]').forEach(button => {
                button.addEventListener('click', () => {
                    appState.booking.room = button.dataset.roomType;
                    screen.querySelector('#roomTypeDisplay').textContent = appState.booking.room;
                    goToStep(screen, appState.booking.room === 'Meditation Room' ? 2 : 3);
                });
            });

            screen.querySelector('#acknowledgeRulesBtn')?.addEventListener('click', () => goToStep(screen, 3));

            screen.querySelectorAll('#roomsStep3 button[data-location]').forEach(button => {
                button.addEventListener('click', () => {
                    appState.booking.location = button.dataset.location;
                    screen.querySelector('#locationDisplay').textContent = appState.booking.location;
                    renderCalendar(new Date().getFullYear(), new Date().getMonth());
                    goToStep(screen, 4);
                });
            });
        }
        
        function handleWellnessFlow() {
            const screen = document.getElementById('screen-wellness');
            if (!screen) return;
            screen.querySelectorAll('#wellnessStep1 button[data-wellness-type]').forEach(button => {
                button.addEventListener('click', () => {
                    if (button.dataset.wellnessType === 'gymSubscription') goToStep(screen, 2);
                });
            });
            screen.querySelector('#gymForm')?.addEventListener('submit', (e) => { e.preventDefault(); goToStep(screen, 3); });
        }
        
        function handleRequestFlow() {
            const screen = document.getElementById('screen-requests');
            if (!screen) return;
            screen.querySelectorAll('#requestsStep1 button[data-request-type]').forEach(button => {
                button.addEventListener('click', () => {
                    const type = button.dataset.requestType;
                    if (type === 'stationery') goToStep(screen, 2);
                    else if (type === 'mailroom') goToStep(screen, 4);
                });
            });
            screen.querySelector('#stationeryForm')?.addEventListener('submit', e => { e.preventDefault(); goToStep(screen, 3); });
            screen.querySelector('#mailroomForm')?.addEventListener('submit', e => { e.preventDefault(); goToStep(screen, 5); });
        }
        
        function handleTicketingFlow() {
            const screen = document.getElementById('screen-ticketing');
            if (!screen) return;
            const categories = {"Facilities": ["Housekeeping", "Business support", "Caterers", "GYM"],"Property (Civil)": ["Plumbing", "Painting", "Carpentry"],"Property (Electricity)": ["Lighting", "Power", "Power socket"],"Property (Mechanical)": ["AC", "Firefighting"],"H&S": ["Hazard"]};
            const categoryEl = document.getElementById('ticketCategory');
            const subCategoryEl = document.getElementById('ticketSubCategory');
            function updateSubCategories() { subCategoryEl.innerHTML = categories[categoryEl.value].map(sub => `<option>${sub}</option>`).join(''); }
            categoryEl.addEventListener('change', updateSubCategories);
            updateSubCategories();
            screen.querySelector('#ticketForm')?.addEventListener('submit', e => { e.preventDefault(); goToStep(screen, 2); });
        }

        // Calendar Logic
        function renderCalendar(year, month) {
            const calendarEl = document.getElementById('calendar');
            calendarEl.innerHTML = '';
            document.getElementById('timeSlotsContainer').style.display = 'none';
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const date = new Date();
            calendarEl.insertAdjacentHTML('beforeend', `<div class="col-span-7 text-center font-semibold mb-2">${new Date(year, month).toLocaleString('default', { month: 'long', year: 'numeric' })}</div>`);
            ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'].forEach(day => calendarEl.insertAdjacentHTML('beforeend', `<div class="calendar-day header">${day}</div>`));
            for (let i = 0; i < firstDay; i++) calendarEl.insertAdjacentHTML('beforeend', '<div class="calendar-day empty"></div>');
            for (let i = 1; i <= daysInMonth; i++) {
                let dayEl = document.createElement('div');
                dayEl.className = 'calendar-day';
                dayEl.textContent = i;
                if (i === date.getDate() && month === date.getMonth() && year === date.getFullYear()) { dayEl.classList.add('selected'); showTimeSlots(i); }
                dayEl.addEventListener('click', () => {
                    document.querySelectorAll('.calendar-day.selected').forEach(d => d.classList.remove('selected'));
                    dayEl.classList.add('selected');
                    appState.booking.date = `${new Date(year, month, i).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}`;
                    showTimeSlots(i);
                });
                calendarEl.appendChild(dayEl);
            }
        }
        function showTimeSlots(day) {
            const timeSlotsContainer = document.getElementById('timeSlotsContainer');
            const timeSlotsEl = document.getElementById('timeSlots');
            timeSlotsEl.innerHTML = '';
            timeSlotsContainer.style.display = 'block';
            const slots = ["10:00 AM", "10:30 AM", "11:00 AM", "11:30 AM", "12:00 PM", "12:30 PM", "01:00 PM", "01:30 PM"];
            slots.forEach(slot => {
                let slotEl = document.createElement('div');
                slotEl.className = 'time-slot';
                slotEl.textContent = slot;
                slotEl.addEventListener('click', () => {
                     document.querySelectorAll('.time-slot.selected').forEach(d => d.classList.remove('selected'));
                     slotEl.classList.add('selected');
                     appState.booking.time = slot;
                     confirmBooking();
                });
                timeSlotsEl.appendChild(slotEl);
            });
        }
        function confirmBooking(){
            const screen = document.getElementById('screen-rooms');
            if(!appState.booking.date) {
                const today = new Date();
                appState.booking.date = `${today.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}`;
            }
            document.getElementById('bookingSummary').innerHTML = `<p><strong>Room:</strong> ${appState.booking.room}</p><p><strong>Location:</strong> ${appState.booking.location}</p><p><strong>Date:</strong> ${appState.booking.date}</p><p><strong>Time:</strong> ${appState.booking.time}</p>`;
            goToStep(screen, 5);
        }

        // Init all flows
        handleRoomBookingFlow();
        handleWellnessFlow();
        handleRequestFlow();
        handleTicketingFlow();
    });
    </script>
</body>
</html>

